!function(a){"use strict";a.module("loadingButton",[]).directive("loadingButton",function(){return{restrict:"EA",scope:{label:"=loadingButton",isLoading:"=",useEllipses:"@"},template:'<span ng-switch="isLoading"><i class="glyphicon glyphicon-refresh glyphicon-spin" ng-switch-when="true"></i><span ng-switch-default>{{ label }}</span></span>'}})}(window.angular),function(a){"use strict";a.module("Middle",["ngAnimate","ngTouch","ui.router","ui.bootstrap","angular-clipboard","spinner","loadingButton"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/groups"),a.state("groupList",{url:"/groups",templateUrl:"partials/group-list.html"}),a.state("groupDetails",{url:"/groups/:groupId",templateUrl:"partials/group-details.html"})}]).filter("members",["$filter",function(b){return function(b){var c=b;return a.isNumber(b)&&(c+=" member",(0===b||b>1)&&(c+="s")),c}}]).filter("groupListDate",["$filter",function(b){return function(c){var d,e=new Date;if(e.setHours(0,0,0,0),a.isDate(c))d=c;else if(a.isNumber(c))d=new Date(c);else{if(!a.isString(c))return b("date")(c);d=Date.parse(c)}return d>=e?b("date")(c,"mediumTime"):b("date")(c,"shortDate")}}]).filter("capitalize",function(){return function(b){return a.isString(b)&&b.length>0?b.charAt(0).toUpperCase()+b.slice(1):b}}).directive("middleMap",["$filter","centerService",function(b,c){return{restrict:"EA",link:function(d,e,f){function g(){var f,g,h,i=c.center(d.groupMembers,d.algorithm.name),j=new google.maps.LatLngBounds;f=new google.maps.Map(e[0],{center:{lat:i[0],lng:i[1]},zoom:i[2]}),a.forEach(d.groupMembers,function(a){a.active&&j.extend(new google.maps.Marker({position:{lat:a.latitude,lng:a.longitude},map:f,label:a.name,title:a.name}).getPosition())}),g=new google.maps.Marker({animation:google.maps.Animation.DROP,position:{lat:i[0],lng:i[1]},map:f}),f.fitBounds(j),h=new google.maps.InfoWindow({content:"<h4>/middle/</h4><p>"+b("number")(i[0])+", "+b("number")(i[1])+'</p><p><a href="https://www.google.com/maps/?q=restaurants&sll='+i[0]+","+i[1]+'" target="_blank">Search nearby this location...</a></a></p>'}),g.addListener("click",function(){h.open(f,g)}),h.open(f,g)}d.$watch("[groupMembers, algorithm]",g,!0)},scope:{groupMembers:"=middleMap",algorithm:"="}}}]).provider("centerService",function(){return{$get:[function(){return{center:function(a,b){var c,d=0,e=0,f=0;switch(b){default:for(c=0;c<a.length;c++)a[c].active&&(d+=a[c].latitude,e+=a[c].longitude,f++);d/=f,e/=f}return[d,e,15]}}}]}}).controller("UserMenuController",["$scope","$uibModal",function(a,b){a.my={username:"ofuangka",logoutUrl:"."},a.showAboutMiddle=function(){b.open({templateUrl:"partials/about-middle.html",controller:"AboutController",scope:a})},a.showWhatsNew=function(){b.open({templateUrl:"partials/whats-new.html",controller:"WhatsNewController",scope:a})}}]).controller("GroupListController",["$scope","$uibModal",function(a,b){a.showCreateGroup=function(){b.open({templateUrl:"partials/create-group.html",controller:"CreateGroupController",scope:a})},a.groups=[{id:"0-ref",name:"Dooty",numMembers:4,ts:(new Date).getTime()},{id:"1-ref",name:"Booger",numMembers:6,ts:(new Date).getTime()}]}]).controller("CreateGroupController",["$scope",function(a){a.userDidCreateGroup=function(){a.isCreatingGroup=!0,a.$close()}}]).controller("GroupDetailsController",["$scope","$window","$timeout","$stateParams","$uibModal",function(a,b,c,d,e){function f(a){}function g(){b.navigator.geolocation?b.navigator.geolocation.getCurrentPosition(f):e.open({templateUrl:"partials/message.html",controller:"NoGeolocationMessageController",scope:a,size:"sm"})}a.isActive=function(a){return a.active},a.toggle=function(a){a.active=!a.active},a.openNew=function(a){b.open(a,"_blank")},a.copyDidSucceed=function(){a.showCopySuccessTooltip=!0,c(function(){a.showCopySuccessTooltip=!1},1e3)},a.copyDidFail=function(b){e.open({templateUrl:"partials/message.html",controller:"CopyFailedMessageController",scope:a,size:"sm"})},a.selectAlgorithm=function(b){a.selectedAlgorithm=b},a.resendPosition=g,a.copyUrl="http://middle-me.appspot.com/ui/#/groups/"+d.groupId,a.members=[{id:"0-ref",name:"ofuangka",latitude:40.0442507,longitude:-75.3882961,ts:(new Date).getTime(),active:!0},{id:"1-ref",name:"tracylvalenzuela",latitude:40.0065617,longitude:-75.2649071,ts:(new Date).getTime(),active:!0},{id:"2-ref",name:"forrestjacobs",latitude:40.079362,longitude:-75.3039367,ts:(new Date).getTime(),active:!0}],a.algorithms=[{name:"simple",link:"https://en.wikipedia.org/wiki/Center_of_mass"},{name:"trossian",link:"http://stackoverflow.com/a/17225597"}],a.selectedAlgorithm=a.algorithms[0]}]).controller("AboutController",["$scope",function(a){a.activeSlide=0}]).controller("WhatsNewController",["$scope",function(a){a.updates=[{ts:(new Date).getTime(),descriptions:["Initial application creation.","Integrated with Google Maps.","Group List view","Group Details view"]}]}]).controller("NoGeolocationMessageController",["$scope",function(a){a.title="Unable to retrieve your location",a.message="We couldn't determine your location for some reason. Feel free to try again."}]).controller("CopyFailedMessageController",["$scope",function(a){a.title="Could not copy URL",a.message="We couldn't copy the URL for some reason. You may have to do it the old fashioned way."}])}(window.angular),function(a){"use strict";a.module("spinner",[]).directive("spinner",function(){return{restrict:"E",template:'<p class="text-center"><i class="glyphicon glyphicon-refresh glyphicon-spin"></i></p>'}})}(window.angular);